webpackJsonp([13],{111:function(t,e,i){var n=i(37)(i(112),i(113),null,null,null);n.options.__file="/Users/joy/Desktop/code/learnEnglish/src/components/HeaderView.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] HeaderView.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},112:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(29);e["default"]={props:{beforeBack:{type:Function,"default":null},pageName:{type:String,"default":"index"},pageTitle:{type:String,"default":"index"},iconName:{type:String,"default":"back"}},mounted:function(){(0,n.saveFrom)(this.pageName,this.$router.history.current)},methods:{goBack:function(){this.beforeBack?this.beforeBack(this.backToLastPage):this.backToLastPage()},backToLastPage:function(){var t=(0,n.getBack)(this.pageName);this.$router.push({name:t.name,query:t.para})}}}},113:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"gb-header"},[i("div",{staticClass:"header-left"},[i("a",{staticClass:"icon","class":t.iconName,attrs:{href:"javascript:void (0);"},on:{click:t.goBack}})]),t._v(" "),i("h1",{staticClass:"has-icon"},[t._v(t._s(t.pageTitle))]),t._v(" "),t._t("default")],2)},staticRenderFns:[]},t.exports.render._withStripped=!0},159:function(t,e,i){var n=i(37)(i(160),i(166),null,null,null);n.options.__file="/Users/joy/Desktop/code/learnEnglish/src/pages/activities/details.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] details.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},160:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(7),s=n(a),o=i(111),r=n(o),c=i(10),l=n(c),d=i(161),u=n(d),h=i(30),p=new l["default"];e["default"]={components:{HeaderView:r["default"],Swiper:u["default"]},data:function(){return{id:null,modalVisiable:!1,data:null,tickets:[],orderInfo:{},price:0,usercredit:!0,getcredit:0}},beforeRouteEnter:function(t,e,i){i(function(e){e.id=t.query.id,e.getDetail()})},watch:{usercredit:function(){this.caculetePrice()}},methods:{getDetail:function(){var t=this;p.send({url:"getWechatActivity",params:{id:this.id},success:function(e){t.data=e.item}}),p.send({url:"getWechatActivityTicket",params:{id:this.id},success:function(e){t.tickets=e.items}})},hideModal:function(){this.modalVisiable=!1},showModal:function(t){var e=this;p.send({url:"getWechatIsLogin",type:"get",needLogin:!1,success:function(i){var n=i.item;if(1==n)e.successShowModal(t);else{var a="http://wx.ledgetrans.com.cn/index.html"+location.hash;localStorage.setItem("loginBack",(0,s["default"])(a)),(0,h.jumpUrl)("login")}}})},successShowModal:function(t){this.modalVisiable=!0,this.orderInfo=t,this.caculetePrice()},caculetePrice:function(){if(USER_SETTINGS.UsePrice){if(this.usercredit){var t=this.orderInfo.ticketPrice-this.orderInfo.userValidCredit*parseInt(USER_SETTINGS.CostPrice)/parseInt(USER_SETTINGS.UseCredit);this.price=t>0?t:0}else this.price=this.orderInfo.ticketPrice;this.getcredit=parseInt(this.price/parseInt(USER_SETTINGS.UsePrice))*parseInt(USER_SETTINGS.UseGiveCredit)}},pay:function(){var t=this;p.send({url:"wechatBuyActivity",type:"post",params:{ActivityTicketId:this.orderInfo.id,CreditPay:this.usercredit?this.orderInfo.userValidCredit:0},success:function(e){t.sendWxPay(e.item)}})},sendWxPay:function(t){var e=this,i=t.activityOrderNo;p.send({url:"getWechatConfig",type:"post",params:{orderNo:i},success:function(t){(0,h.wxPay)({d:t,success:function(){e.$router.replace({name:"timeline"}),console.log("支付成功")},cancel:function(){e.cancelPay(i),console.log("支付取消")},fail:function(){console.log("支付失败")}})}})},cancelPay:function(t){var e=t.activityOrderNo;p.send({url:"wechatBuyActivity",type:"put",params:{activityOrderNo:e}})},error:function(t){t.target.setAttribute("src","./CommonImages/default.png")},getImgUrl:function(t){return t||"./CommonImages/default.png"}}}},161:function(t,e,i){function n(t){a||i(162)}var a=!1,s=i(37)(i(164),i(165),n,"data-v-2f2c57a6",null);s.options.__file="/Users/joy/Desktop/code/learnEnglish/src/components/swiper/vue-swiper.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] vue-swiper.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports},162:function(t,e,i){var n=i(163);"string"==typeof n&&(n=[[t.id,n,""]]);i(36)(n,{});n.locals&&(t.exports=n.locals)},163:function(t,e,i){e=t.exports=i(35)(),e.push([t.id,"\ndiv[data-v-2f2c57a6],ul[data-v-2f2c57a6],li[data-v-2f2c57a6],span[data-v-2f2c57a6],img[data-v-2f2c57a6]{\n    margin:0;\n    padding:0;\n}\n.slider-container[data-v-2f2c57a6]{\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n}\n.slider-container ul li[data-v-2f2c57a6]{\n    list-style: none;\n    display: inline-block;\n    overflow: hidden;\n}\n.item-photos[data-v-2f2c57a6]{\n    position: relative;\n}\n.item-photos li img[data-v-2f2c57a6]{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate(-50%,-50%);\n            transform: translate(-50%,-50%);\n    -ms--transform: translate(-50%,-50%);\n    -webkit-transform: translate(-50%,-50%);\n    -moz-transform: translate(-50%,-50%);\n    -o-transform: translate(-50%,-50%);\n    display: block;\n    border: 0;\n    height: 100%;\n    vertical-align: top;\n}\n.dot[data-v-2f2c57a6]{\n    text-align: center;\n    position: absolute;\n    bottom:20px;\n    height: 10px;\n    width: 100%;\n}\n.dot span[data-v-2f2c57a6]{\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: rgba(255, 255, 255, 0.3);\n    display: inline-block;\n    margin:0 5px;\n}\n.dot span.cur[data-v-2f2c57a6]{\n     background: rgba(255,255,255,1);\n}\n.slideLiShow[data-v-2f2c57a6]{\n    display: block;\n    animation:myanimationmyanimation 1s;\n    -moz-animation:myanimation-data-v-2f2c57a6 1s; /* Firefox */\n    -webkit-animation:myanimation-data-v-2f2c57a6 1s; /* Safari and Chrome */\n    -o-animation:myanimation-data-v-2f2c57a6 1s; /* Opera */\n}\n.slideLiHide[data-v-2f2c57a6]{\n    /* display: none !important */\n    opacity: 0;\n}\n@keyframes myanimation-data-v-2f2c57a6\n{\nfrom {opacity:0.2;\n}\nto {opacity:1;\n}\n}\n@-webkit-keyframes myanimation\n/* Safari and Chrome */ {\nfrom {opacity:0.2;\n}\nto {opacity:1;\n}\n}\n",""])},164:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="vertical",n="horizontal";e["default"]={props:{dataList:{type:Array,"default":function(){return[]}},animationType:{type:String,"default":"SCROLL_TYPE"},backgroundColor:{type:String,"default":"#262626"},squareRatio:{type:Number,"default":0},curPage:{type:Number,"default":0},randomStart:{type:Boolean,"default":!1},pagerShow:{type:Boolean,"default":!0}},data:function(){return{delta:0,containerWidth:0,itemWidth:0,newList:[],transitionDuration:0,loop:!0,autoplay:!0,translateX:0,direction:n,currentPage:this.curPage,translateY:0,clientWidth:0,position:"static",domHeight:0,timerIntervalLoop:null,originDataLength:0,timerOutLoop:null}},created:function(){if("SCROLL_TYPE"===this.animationType?this.position="relative":"FADE_IN"===this.animationType&&(this.position="absolute"),this.dataList.length<=1)return!1;if(this.randomStart&&(this.dataList=this.random(this.dataList)),this.dataList.length>1)if(this.originDataLength=this.dataList.length,"SCROLL_TYPE"===this.animationType){var t=this.dataList[0],e=[this.dataList[this.originDataLength-1]];this.newList=e.concat(this.dataList,t),this.containerWidth=this.newList.length,this.itemWidth=1/this.containerWidth}else"FADE_IN"===this.animationType&&(this.newList=this.dataList,this.containerWidth=1,this.itemWidth=1)},beforeDestroy:function(){this.clearTimer()},mounted:function(){return this.clientWidth=document.body.clientWidth,1===this.dataList.length?(this.domHeight=this.clientWidth*this.squareRatio,!1):(this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),void(this.squareRatio?(this.domHeight=this.clientWidth*this.squareRatio,this.startAuto()):this.loadImg(this.dataList[0].ImageUrl)))},methods:{_Transitionend:function(){this.currentPage>this.dataList.length?(this.currentPage=1,this.setPage(1,!0)):0===this.currentPage&&(this.currentPage=this.dataList.length,this.setPage(this.dataList.length,!0)),this.onAnimating=!1},random:function(t){function e(t,e){return Math.random()>=.5?-1:1}return t.sort(e)},startAuto:function(){"SCROLL_TYPE"===this.animationType?this.loop?this.$nextTick(function(){this.transitionDuration=500,this._createScrollLoop(),this.setPage(this.currentPage,!0)}):this.setPage(this.currentPage):"FADE_IN"===this.animationType&&(this.loop?this.$nextTick(function(){this._createFadeInLoop()}):this.setPage(this.currentPage))},clearTimer:function(){this.timerIntervalLoop&&clearInterval(this.timerIntervalLoop)},loadImg:function(t){var e=this,i=new Image;i.src=t,i.onload=function(t){e.domHeight=i.height/i.width*e.clientWidth,e.dataList.length>1&&e.startAuto()}},_createFadeInLoop:function(){var t=this;this.timerIntervalLoop=setInterval(function(){t.currentPage===t.originDataLength?t.currentPage=1:t.currentPage++},3e3)},setFadeInPage:function(){this.delta>0?1==this.currentPage?this.currentPage=this.originDataLength:this.currentPage--:this.currentPage===this.originDataLength?this.currentPage=1:this.currentPage++},setPage:function(t,e){this.transitionDuration=e?0:500,this.translateX=-t*this.clientWidth},_onTouchStart:function(t){this.onAnimating||(this.startPos=this._getTouchPos(t),this.clearTimer(),this.onTouchDistance=this.translateX,document.addEventListener("touchmove",this._onTouchMove,!1),document.addEventListener("touchend",this._onTouchEnd,!1))},_onTouchMove:function(t){this.onAnimating||"SCROLL_TYPE"===this.animationType&&(this.delta=this._getTouchPos(t)-this.startPos,this.onTouchDistance+this.delta>=0?this.translateX=0:this.onTouchDistance+this.delta<=-(this.originDataLength+1)*this.clientWidth?this.translateX=-(this.originDataLength+1)*this.clientWidth:this.translateX=this.onTouchDistance+this.delta)},_onTouchEnd:function(t){var e=this;this.onAnimating||(this.delta=this._getTouchPos(t)-this.startPos,this.pureNum(this.delta)&&("FADE_IN"===this.animationType?this.setFadeInPage():"SCROLL_TYPE"===this.animationType&&(this.delta>0?this.currentPage--:this.currentPage++,this._moveScroll())),this.timerOutLoop&&clearTimeout(this.timerOutLoop),this.timerOutLoop=setTimeout(function(){e.startAuto()},this.transitionDuration),document.removeEventListener("touchmove",this._onTouchMove,!1),document.removeEventListener("touchend",this._onTouchEnd,!1))},_moveScroll:function(){this.onAnimating||(this.onAnimating=!0,this.setPage(this.currentPage))},_scrollLoop:function(){this.setPage(this.currentPage)},_createScrollLoop:function(){var t=this;this.clearTimer(),this.timerIntervalLoop=setInterval(function(){t.currentPage++,t._scrollLoop()},8e3)},_getTouchPos:function(t){var e=this.isHorizontal()?"pageX":"pageY";return t.changedTouches?t.changedTouches[0][e]:t[e]},isHorizontal:function(){return this.direction===n},isVertical:function(){return this.direction===i},pureNum:function(t){return Math.abs(t)>50},outLink:function(t){t&&(location.href=t)}}}},165:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dataList.length>0?i("div",{staticClass:"slider-container"},[t.dataList.length>1?i("ul",{ref:"swiperWrap",staticClass:"item-photos",style:{width:100*t.containerWidth+"%",height:t.domHeight+"px",transform:"translate3d("+t.translateX+"px,"+t.translateY+"px, 0)","transition-duration":t.transitionDuration+"ms"},on:{touchstart:t._onTouchStart,transitionend:t._Transitionend}},[t._l(t.newList,function(e,n){return[i("li",{"class":"FADE_IN"===t.animationType?n+1==t.currentPage?"slideLiShow":"slideLiHide":"",style:{width:100*t.itemWidth+"%",height:t.domHeight+"px",position:t.position,backgroundColor:t.backgroundColor},on:{click:function(i){t.outLink(e.LinkUrl)}}},[i("img",{style:{width:"SCROLL_TYPE"===t.animationType?"100%":"auto"},attrs:{src:e.ImageUrl}})])]})],2):t._e(),t._v(" "),1===t.dataList.length?i("ul",{ref:"swiperWrap",staticClass:"item-photos",style:{width:"100%",height:t.domHeight+"px"}},[[i("li",{style:{width:"100%",height:t.domHeight+"px",position:t.position,backgroundColor:t.backgroundColor},on:{click:function(e){t.outLink(t.dataList[0].LinkUrl)}}},[i("img",{attrs:{src:t.dataList[0].ImageUrl}})])]],2):t._e(),t._v(" "),t.dataList.length>1?i("div",{staticClass:"dot",style:{display:t.pagerShow?"block":"none"}},[t._l(t.dataList,function(e,n){return[n+1==t.currentPage?i("span",{staticClass:"cur"}):i("span")]})],2):t._e()]):t._e()},staticRenderFns:[]},t.exports.render._withStripped=!0},166:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page pg-activities pg-activity-details"},[i("HeaderView",{attrs:{pageName:"activityDetail",pageTitle:"活动详情"}}),t._v(" "),i("div",{staticClass:"mainview"},[t.data?i("section",{staticClass:"activity-details"},[i("div",{staticClass:"activity-summary"},[i("div",{staticClass:"activity-poster"},[i("img",{attrs:{src:t.getImgUrl(t.data.activityImgUrl[0])},on:{error:t.error}})])]),t._v(" "),i("div",{staticClass:"gb-listview"},[i("ul",[i("li",[i("div",[i("label",{attrs:{"for":""}},[t._v("主题")]),t._v(" "),i("span",[t._v(t._s(t.data.activityTitle))])])]),t._v(" "),i("li",[i("div",[i("label",{attrs:{"for":""}},[t._v("时间")]),t._v(" "),i("span",[t._v(t._s(t.data.activityDate.split(" ")[0]))])])]),t._v(" "),i("li",[i("div",[i("label",{attrs:{"for":""}},[t._v("地点")]),t._v(" "),i("span",[t._v(t._s(t.data.activityAddress))])])])])]),t._v(" "),i("div",{staticClass:"activity-desc",domProps:{innerHTML:t._s(t.data.activityContent)}}),t._v(" "),t.tickets.length?i("div",{staticClass:"gb-listview"},[i("div",{staticClass:"legend"},[t._v("入场券")]),t._v(" "),i("ul",t._l(t.tickets,function(e,n){return i("li",{key:e.id},[i("div",[i("label",{attrs:{"for":""}},[t._v(t._s(e.ticketClass))]),t._v(" "),i("span",{on:{click:function(i){t.showModal(e)}}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v("购买")])]),t._v(" "),i("em",[t._v(t._s(e.ticketIntro))])])])}))]):t._e()]):t._e(),t._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:t.modalVisiable,expression:"modalVisiable"}],staticClass:"quick-buy"},[i("div",{staticClass:"modal"}),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"hd"},[i("div",{staticClass:"title"},[t._v("购买入场券")]),t._v(" "),i("a",{staticClass:"cancel",attrs:{href:"javascript:void(0)"},on:{click:t.hideModal}},[t._v("取消")])]),t._v(" "),i("div",{staticClass:"bd"},[i("ul",{staticClass:"listview"},[i("li",[i("label",[t._v("入场券")]),t._v(" "),i("span",[t._v(t._s(t.orderInfo.ticketClass))])]),t._v(" "),i("li",[i("label",[t._v("价格")]),t._v(" "),i("span",[t._v("￥"+t._s(t.orderInfo.ticketPrice))])]),t._v(" "),t.orderInfo.userValidCredit?i("li",[i("label",{attrs:{"for":""}},[t._v("可用亮值")]),t._v(" "),i("span",[t._v(t._s(t.orderInfo.userValidCredit))]),t._v(" "),i("span",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.usercredit,expression:"usercredit"}],staticClass:"ctrl-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.usercredit)?t._i(t.usercredit,null)>-1:t.usercredit},on:{change:function(e){var i=t.usercredit,n=e.target,a=!!n.checked;if(Array.isArray(i)){var s=null,o=t._i(i,s);n.checked?o<0&&(t.usercredit=i.concat([s])):o>-1&&(t.usercredit=i.slice(0,o).concat(i.slice(o+1)))}else t.usercredit=a}}})])]):t._e(),t._v(" "),i("li",[i("label",[t._v("获赠亮值")]),t._v(" "),i("span",[t._v(t._s(t.getcredit))])])])]),t._v(" "),i("div",{staticClass:"action",on:{click:t.pay}},[i("a",{staticClass:"button",attrs:{href:"javascript:void(0);"}},[t._v("去支付￥"+t._s(t.price.toFixed(2)))])])])])])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});